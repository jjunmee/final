<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="mapper.ProfileUserMapper">
 	<!-- 해당 유저 프로필 전체 가져오기 -->
 	<select id="UserProfileList" resultType="profileUser" parameterType="String">
 		select A.users_num,A.point,A.sts,B.profile_num,B.nickname,B.profile_age,B.profile_pwd,B.profile_first,C.pimg_src from users A,profile B, profile_img C where A.users_num = B.users_num and B.pimg_num = C.pimg_num  and A.id=#{id}
 	</select>
 	<!-- 맞는지 모르겠음 확인 해야 함 -->
 	<insert id="UserProfileInsert" parameterType="profileUser">
 		insert into profile values(0,#{nickname},(select users_num from users where id = #{id}),#{pimg_num},#{profile_age},#{profile_pwd},(select ifnull(max(profile_first)+1,0) from profile where users_num = (select users_num from where id=#{id})),now())
 	</insert>	
 	<update id="UserProfileUpdate" parameterType="profileUser">
 		update profile set nickname=#{nickname}, pimg_num=#{pimg_num}, profile_pwd=#{profile_pwd}, profile_first=#{profile_first} where profile_num = #{profile_num}
 	</update>
 	<delete id="UserProfileDelete" parameterType="int">
 		delete from profile where profile_num = #{profile_num}
 	</delete>
 </mapper>